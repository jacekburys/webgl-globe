
function boxesForGauss(sigma, n)  // standard deviation, number of boxes
{
    var wIdeal = Math.sqrt((12*sigma*sigma/n)+1);  // Ideal averaging filter width 
    var wl = Math.floor(wIdeal);  if(wl%2==0) wl--;
    var wu = wl+2;

    var mIdeal = (12*sigma*sigma - n*wl*wl - 4*n*wl - 3*n)/(-4*wl - 4);
    var m = Math.round(mIdeal);
    // var sigmaActual = Math.sqrt( (m*wl*wl + (n-m)*wu*wu - n)/12 );

    var sizes = [];  for(var i=0; i<n; i++) sizes.push(i<m?wl:wu);
    return sizes;
}

function gaussBlur_2 (scl, tcl, w, h, r) {
    var bxs = boxesForGauss(r, 3);
    boxBlur_2 (scl, tcl, w, h, (bxs[0]-1)/2);
    boxBlur_2 (tcl, scl, w, h, (bxs[1]-1)/2);
    boxBlur_2 (scl, tcl, w, h, (bxs[2]-1)/2);
}
function boxBlur_2 (scl, tcl, w, h, r) {
    for(var i=0; i<h; i++)
        for(var j=0; j<w; j++) {
            var val = 0;
            for(var iy=i-r; iy<i+r+1; iy++) {
                for(var ix=j-r; ix<j+r+1; ix++) {
                    var x = (ix + w) % w;//Math.min(w-1, Math.max(0, ix));
                    var y = (iy + h) % h;//Math.min(h-1, Math.max(0, iy));
                    if ((i-iy) * (i-iy) + (j-ix) * (j-ix) >= r*r) continue;
                    val += scl[y*w+x];
                }
            }
            tcl[i*w+j] = val/((r+r+1)*(r+r+1));
        }
}

function printMags(mags, w, h) {
  var temp = new Array(h);
  for (var i=0; i<h; i++) {
    temp[i] = new Array(w);
  }
  for (var i=0; i<h; i++) {
    for (var j=0; j<w; j++) {
      temp[i][j] = mags[i*w + j];
    }
  }
  console.log(temp);
}

function getBlurredData(arr) {
  var M = new Array(360*180);
  for (var i=0; i<360*180; i++) {
    M[i] = 0;
  }

  for (var i = 0; i < arr.length; i++) {
    var M1 = new Array(360*180);
    for (var j=0; j<360*180; j++) {
      M1[j] = 0;
    }
    var y = Math.floor(arr[i].latitude) ;
    var x = Math.floor(arr[i].longtitude);
    var mag = arr[i].magnitude * 150;
    M1[(y+90)*360 + x+180] = mag;

    var M2 = new Array(360*180);
    for (var j=0; j<360*180; j++) {
      M2[j] = 0;
    }
    gaussBlur_2(M1, M2, 360, 180, 4);
    for (var j=0; j<360*180; j++) {
      M[j] += M2[j];
    }
  }
  var res = [];
  for (var i=0; i<180; i++) {
    for (var j=0; j<360; j++) {
      if (!M[i*360 + j]) continue;
      res.push(i-90);
      res.push(j-180);
      res.push(M[i*360 + j]);
    }
  }
  return res;
}

var start_data1 = 
{"stats":{"ATL":14,"ORD":33,"CDG":9,"PEK":12,"DXB":2,"DFW":15,"JFK":38,"CLT":11,"IAH":49,"LHR":27,"MIA":5,"IST":11,"AMS":1,"PHX":16,"LAX":51,"SFO":20,"LAS":0,"MAD":2,"PVG":8,"DEN":9},"done":["IAH->PHX","IAH->MIA","IAH->CLT","IAH->IST","IAH->DFW","IAH->LAX","IAH->ORD","IAH->ATL","PHX->CLT","PHX->LAS","PHX->DFW","PHX->LAX","MIA->IAH","MIA->CLT","MIA->DFW","MIA->LAX","CLT->IAH","CLT->PHX","CLT->MIA","CLT->LAS","CLT->SFO","CLT->DFW","CLT->LAX","CLT->ORD","CLT->ATL","LAS->PHX","LAS->CLT","LAS->DEN","LAS->DFW","DEL->LHR","CAN->CDG","JFK->PVG","JFK->DFW","JFK->ATL","AMS->PVG","AMS->PEK","PVG->MAD","IST->PEK","DFW->IAH","DFW->MIA","DFW->CLT","DFW->LAS","DFW->SFO","DFW->JFK","DFW->LAX","DFW->ORD","DFW->ATL","LAX->IAH","LAX->PHX","LAX->AMS","LHR->JFK","LHR->IST","HND->MIA","ORD->IAH","ORD->CLT","ORD->DFW","ORD->DXB","ORD->ATL","ORD->PEK","DXB->LHR","DXB->ORD","DXB->ATL","DXB->PEK","ATL->IAH","ATL->CLT","ATL->JFK","ATL->DFW","ATL->ORD","ATL->DXB","ATL->PEK","PEK->CDG","PEK->ORD","PEK->ATL"],"globe":[{"latitude":40.0798614,"longtitude":116.6009234,"magnitude":0.23529411764705882},{"latitude":33.6433884,"longtitude":-84.4288247,"magnitude":0.27450980392156865},{"latitude":25.2531793,"longtitude":55.3634841,"magnitude":0.0392156862745098},{"latitude":41.9741665,"longtitude":-87.9095101,"magnitude":0.6470588235294118},{"latitude":35.5493975,"longtitude":139.7776499,"magnitude":0},{"latitude":51.4700256,"longtitude":-0.4564842,"magnitude":0.5294117647058824},{"latitude":33.9415933,"longtitude":-118.4107187,"magnitude":1},{"latitude":22.3080519,"longtitude":113.9162921,"magnitude":0},{"latitude":49.0096941,"longtitude":2.5457358,"magnitude":0.17647058823529413},{"latitude":32.8998136,"longtitude":-97.0425239,"magnitude":0.29411764705882354},{"latitude":40.9829928,"longtitude":28.8082538,"magnitude":0.21568627450980393},{"latitude":50.037936,"longtitude":8.5599631,"magnitude":0},{"latitude":31.1443485,"longtitude":121.8060843,"magnitude":0.1568627450980392},{"latitude":52.3105419,"longtitude":4.7660857,"magnitude":0.0196078431372549},{"latitude":40.6413151,"longtitude":-73.7803278,"magnitude":0.7450980392156863},{"latitude":1.3644256,"longtitude":103.9893421,"magnitude":0},{"latitude":1.3644256,"longtitude":103.9893421,"magnitude":0},{"latitude":-6.1275065,"longtitude":106.6514972,"magnitude":0},{"latitude":39.8561004,"longtitude":-104.6759263,"magnitude":0.17647058823529413},{"latitude":13.6900043,"longtitude":100.7479237,"magnitude":0},{"latitude":37.6213171,"longtitude":-122.3811441,"magnitude":0.39215686274509803},{"latitude":37.460195,"longtitude":126.438507,"magnitude":0},{"latitude":2.7545304,"longtitude":101.7021233,"magnitude":0},{"latitude":40.4839402,"longtitude":-3.5701402,"magnitude":0.0392156862745098},{"latitude":28.5561671,"longtitude":77.0977691,"magnitude":0},{"latitude":36.0840041,"longtitude":-115.1559276,"magnitude":0},{"latitude":35.214407,"longtitude":-80.9495033,"magnitude":0.21568627450980393},{"latitude":25.7958698,"longtitude":-80.2892344,"magnitude":0.09803921568627451},{"latitude":33.4372951,"longtitude":-112.0165429,"magnitude":0.3137254901960784},{"latitude":29.9902245,"longtitude":-95.3389714,"magnitude":0.9607843137254902}]};

var start_data2 = 
{"stats":{"ATL":14,"ORD":33,"CDG":9,"PEK":12,"DXB":2,"DFW":15,"JFK":38,"CLT":11,"IAH":49,"LHR":27,"MIA":5,"IST":11,"AMS":1,"PHX":16,"LAX":51,"SFO":20,"LAS":0,"MAD":2,"PVG":8,"DEN":9},"done":["IAH->PHX","IAH->MIA","IAH->CLT","IAH->IST","IAH->DFW","IAH->LAX","IAH->ORD","IAH->ATL","PHX->CLT","PHX->LAS","PHX->DFW","PHX->LAX","MIA->IAH","MIA->CLT","MIA->DFW","MIA->LAX","CLT->IAH","CLT->PHX","CLT->MIA","CLT->LAS","CLT->SFO","CLT->DFW","CLT->LAX","CLT->ORD","CLT->ATL","LAS->PHX","LAS->CLT","LAS->DEN","LAS->DFW","DEL->LHR","CAN->CDG","JFK->PVG","JFK->DFW","JFK->ATL","AMS->PVG","AMS->PEK","PVG->MAD","IST->PEK","DFW->IAH","DFW->MIA","DFW->CLT","DFW->LAS","DFW->SFO","DFW->JFK","DFW->LAX","DFW->ORD","DFW->ATL","LAX->IAH","LAX->PHX","LAX->AMS","LHR->JFK","LHR->IST","HND->MIA","ORD->IAH","ORD->CLT","ORD->DFW","ORD->DXB","ORD->ATL","ORD->PEK","DXB->LHR","DXB->ORD","DXB->ATL","DXB->PEK","ATL->IAH","ATL->CLT","ATL->JFK","ATL->DFW","ATL->ORD","ATL->DXB","ATL->PEK","PEK->CDG","PEK->ORD","PEK->ATL"],"globe":[{"latitude":40.0798614,"longtitude":116.6009234,"magnitude":0.23529411764705882},{"latitude":33.6433884,"longtitude":-84.4288247,"magnitude":0.27450980392156865},{"latitude":25.2531793,"longtitude":55.3634841,"magnitude":0.0392156862745098},{"latitude":41.9741665,"longtitude":-87.9095101,"magnitude":0.6470588235294118},{"latitude":35.5493975,"longtitude":139.7776499,"magnitude":0},{"latitude":51.4700256,"longtitude":-0.4564842,"magnitude":0.5294117647058824},{"latitude":33.9415933,"longtitude":-118.4107187,"magnitude":1},{"latitude":22.3080519,"longtitude":113.9162921,"magnitude":0},{"latitude":49.0096941,"longtitude":2.5457358,"magnitude":0.17647058823529413},{"latitude":32.8998136,"longtitude":-97.0425239,"magnitude":0.29411764705882354},{"latitude":40.9829928,"longtitude":28.8082538,"magnitude":0.21568627450980393},{"latitude":50.037936,"longtitude":8.5599631,"magnitude":0},{"latitude":31.1443485,"longtitude":121.8060843,"magnitude":0.1568627450980392},{"latitude":52.3105419,"longtitude":4.7660857,"magnitude":0.0196078431372549},{"latitude":40.6413151,"longtitude":-73.7803278,"magnitude":0.7450980392156863},{"latitude":1.3644256,"longtitude":103.9893421,"magnitude":0},{"latitude":1.3644256,"longtitude":103.9893421,"magnitude":0},{"latitude":-6.1275065,"longtitude":106.6514972,"magnitude":0},{"latitude":39.8561004,"longtitude":-104.6759263,"magnitude":0.17647058823529413},{"latitude":13.6900043,"longtitude":100.7479237,"magnitude":0},{"latitude":37.6213171,"longtitude":-122.3811441,"magnitude":0.39215686274509803},{"latitude":37.460195,"longtitude":126.438507,"magnitude":0},{"latitude":2.7545304,"longtitude":101.7021233,"magnitude":0},{"latitude":40.4839402,"longtitude":-3.5701402,"magnitude":0.0392156862745098},{"latitude":28.5561671,"longtitude":77.0977691,"magnitude":0},{"latitude":36.0840041,"longtitude":-115.1559276,"magnitude":0},{"latitude":35.214407,"longtitude":-80.9495033,"magnitude":0.21568627450980393},{"latitude":25.7958698,"longtitude":-80.2892344,"magnitude":0.09803921568627451},{"latitude":33.4372951,"longtitude":-112.0165429,"magnitude":0.3137254901960784},{"latitude":29.9902245,"longtitude":-95.3389714,"magnitude":0.9607843137254902}]};

var start_data3 =
{"stats":{"DXB":83,"ORD":57,"HND":62,"LHR":200,"CDG":113,"DFW":29,"IST":30,"FRA":38,"PVG":147,"AMS":80,"JFK":68,"CAN":85,"CGK":93,"SFO":123,"MAD":37,"DEL":31,"LAS":48,"CLT":13,"PHX":31,"IAH":50,"PEK":171,"HKG":249,"ICN":119,"KUL":132,"LAX":162,"DEN":75,"BKK":142,"ATL":19,"SIN":188,"MIA":27},"done":["PHX->HND","MIA->JFK","CLT->BKK","DEL->FRA","DEL->CDG","MAD->HKG","MAD->ATL","KUL->PHX","KUL->MIA","KUL->LAS","KUL->DEL","KUL->ICN","KUL->SFO","KUL->BKK","KUL->CGK","KUL->CAN","KUL->SIN","KUL->JFK","KUL->AMS","KUL->PVG","KUL->FRA","KUL->IST","KUL->DFW","KUL->HKG","KUL->LAX","KUL->HND","KUL->ORD","KUL->ATL","KUL->PEK","ICN->PHX","ICN->MIA","ICN->CLT","ICN->LAS","ICN->KUL","ICN->SFO","ICN->DEN","ICN->CAN","ICN->SIN","ICN->JFK","ICN->AMS","ICN->PVG","ICN->FRA","ICN->IST","ICN->CDG","ICN->HND","ICN->ORD","ICN->DXB","ICN->ATL","ICN->PEK","SFO->PHX","SFO->MIA","SFO->LAS","SFO->DEL","SFO->ICN","SFO->BKK","SFO->DEN","SFO->CAN","SFO->JFK","SFO->DFW","SFO->LAX","SFO->HND","SFO->ORD","SFO->DXB","BKK->IAH","BKK->PHX","BKK->MIA","BKK->KUL","BKK->SFO","BKK->DEN","BKK->CGK","BKK->SIN","BKK->AMS","BKK->PVG","BKK->FRA","BKK->DFW","BKK->CDG","BKK->HKG","BKK->PEK","DEN->LAX","CGK->PHX","CGK->KUL","CGK->ICN","CGK->SFO","CGK->DEN","CGK->CAN","CGK->SIN","CGK->ORD","CGK->DXB","CGK->ATL","CGK->PEK","CAN->PHX","CAN->MIA","CAN->LAS","CAN->DEL","CAN->MAD","CAN->KUL","CAN->ICN","CAN->PVG","CAN->HKG","CAN->LAX","CAN->HND","CAN->ORD","CAN->PEK","SIN->IAH","SIN->PHX","SIN->MIA","SIN->CLT","SIN->LAS","SIN->DEL","SIN->MAD","SIN->SFO","JFK->IST","IST->JFK","MAD->LAS","MAD->DEL","MAD->KUL","MAD->ICN","MAD->SFO","MAD->DEN","MAD->PVG","ICN->DEL","ICN->HKG","BKK->LAS","BKK->HND","BKK->ATL","DEN->PHX","DEN->MIA","DEN->LAS","DEN->ICN","DEN->SIN","DEN->PVG","DEN->DFW","CGK->BKK","CGK->JFK","CGK->AMS","CGK->PVG","CGK->FRA","CGK->IST","CGK->CDG","CGK->HKG","CGK->LAX","CGK->LHR","CAN->BKK","CAN->DEN","CAN->CGK","CAN->SIN","SIN->KUL","SIN->BKK","SIN->DEN","SIN->CGK","SIN->JFK","SIN->IST","SIN->DFW","SIN->CDG","SIN->HKG","SIN->LAX","SIN->LHR","SIN->HND","SIN->ORD","SIN->DXB","SIN->ATL","JFK->PHX","JFK->MIA","JFK->CLT","JFK->LAS","JFK->MAD","JFK->KUL","JFK->SFO","JFK->DEN","JFK->CGK","JFK->CAN","JFK->PVG","JFK->FRA","JFK->CDG","JFK->LAX","JFK->LHR","JFK->HND","AMS->PHX","AMS->LAS","AMS->MAD","AMS->ICN","AMS->HND","AMS->ATL","AMS->PEK","PVG->MIA","PVG->CLT","PVG->DEL","PVG->ICN","PVG->CAN","PVG->JFK","PVG->AMS","PVG->DFW","PVG->CDG","PVG->HKG","PVG->ORD","PVG->DXB","PVG->ATL","PVG->PEK","FRA->PHX","FRA->AMS","FRA->CDG","FRA->HKG","FRA->LHR","IST->IAH","IST->LAS","IST->CGK","IST->SIN","IST->DFW","IST->ORD","IST->ATL","DFW->PHX","DFW->KUL","DFW->ICN","DFW->BKK","DFW->DEN","DFW->PEK","CDG->IAH","CDG->CGK","CDG->HND","CDG->PEK","HKG->LAS","HKG->ICN","HKG->SFO","HKG->BKK","HKG->CGK","HKG->CAN","HKG->SIN","HKG->JFK","HKG->PVG","HKG->DFW","HKG->PEK","LAX->MIA","LAX->CLT","LAX->MAD","LAX->SFO","LAX->DEN","LAX->JFK","LAX->LHR","LAX->ATL","LHR->KUL","LHR->CGK","LHR->CAN","HND->IAH","HND->LAS","HND->KUL","HND->ICN","HND->CGK","HND->CAN","HND->SIN","HND->JFK","HND->PVG","HND->FRA","HND->IST","HND->HKG","HND->LAX","HND->PEK","ORD->PHX","ORD->LAS","ORD->BKK","ORD->DEN","ORD->JFK","ORD->IST","ORD->HKG","ORD->LAX","ORD->LHR","ORD->HND","ORD->DXB","DXB->IAH","DXB->PHX","DXB->MIA","DXB->SFO","DXB->SIN","DXB->PVG","DXB->DFW","DXB->HND","DXB->ORD","DXB->ATL","DXB->PEK","ATL->PHX","ATL->LAS","ATL->MAD","ATL->SFO","ATL->BKK","ATL->DEN","ATL->CGK","ATL->SIN","ATL->AMS","ATL->CDG","ATL->LAX","PEK->MIA","PEK->KUL","PEK->ICN","PEK->BKK","PEK->DEN","PEK->SIN","PEK->HKG","PEK->LAX","PEK->ATL","IAH->MIA","IAH->CLT","IAH->LAS","IAH->MAD","IAH->CGK","IAH->JFK","IAH->PVG","IAH->IST","IAH->DXB","IAH->ATL","PHX->IAH","PHX->MIA","PHX->LAS","PHX->SFO","PHX->BKK","PHX->DEN","PHX->JFK","PHX->IST","PHX->DFW","PHX->HKG","PHX->LAX","PHX->LHR","PHX->ATL","MIA->PHX","MIA->LAS","MIA->KUL","MIA->ICN","MIA->SFO","MIA->BKK","MIA->DEN","MIA->CGK","MIA->FRA","MIA->IST","MIA->DFW","MIA->CDG","MIA->LAX","MIA->HND","MIA->ORD","MIA->ATL","CLT->PHX","CLT->MIA","CLT->SFO","CLT->DEN","CLT->JFK","CLT->IST","CLT->DFW","CLT->ATL","LAS->MIA","LAS->CLT","LAS->ICN","LAS->BKK","LAS->JFK","LAS->AMS","LAS->DFW","LAS->LAX","LAS->LHR","LAS->ORD","LAS->DXB","LAS->ATL","DEL->CLT","DEL->SFO","DEL->BKK","DEL->DEN","DEL->CGK","DEL->SIN","DEL->PVG","DEL->DFW","DEL->HKG","DEL->ORD","DEL->DXB","DEL->ATL","MAD->CGK","MAD->CAN","MAD->FRA","MAD->CDG","MAD->LAX","MAD->LHR","MAD->HND","KUL->CDG","BKK->MAD","DEN->IST","DEN->CDG","CGK->HND","CAN->JFK","JFK->HKG","JFK->ATL","IST->CDG","DFW->MIA","DFW->CLT","DFW->LAS","DFW->SFO","DFW->LAX","LAX->PHX","LHR->ICN","LHR->HKG","LHR->DXB","ORD->IAH","ATL->MIA","ATL->DFW","ATL->ORD","IAH->PHX","IAH->DEL","IAH->KUL","IAH->ICN","IAH->SFO","IAH->BKK","IAH->DEN","IAH->CAN","IAH->SIN","IAH->AMS","IAH->FRA","IAH->DFW","IAH->CDG","IAH->HKG","IAH->LAX","IAH->LHR","IAH->HND","IAH->ORD","IAH->PEK","PHX->CLT","PHX->DEL","PHX->MAD","PHX->KUL","PHX->ICN","PHX->CGK","PHX->CAN","PHX->SIN","PHX->AMS","PHX->PVG","PHX->FRA","PHX->CDG","PHX->ORD","PHX->DXB","PHX->PEK","MIA->IAH","MIA->CLT","MIA->DEL","MIA->MAD","MIA->CAN","MIA->SIN","MIA->AMS","MIA->PVG","MIA->HKG","MIA->LHR","MIA->DXB","MIA->PEK","CLT->IAH","CLT->LAS","CLT->DEL","CLT->MAD","CLT->KUL","CLT->ICN","CLT->CGK","CLT->CAN","CLT->SIN","CLT->AMS","CLT->PVG","CLT->FRA","CLT->CDG","CLT->HKG","CLT->LAX","CLT->LHR","CLT->HND","CLT->ORD","CLT->DXB","CLT->PEK","LAS->IAH","LAS->PHX","LAS->DEL","LAS->MAD","LAS->KUL","LAS->SFO","LAS->DEN","LAS->CGK","LAS->CAN","LAS->SIN","LAS->PVG","LAS->FRA","LAS->IST","LAS->CDG","LAS->HKG","LAS->HND","LAS->PEK","DEL->IAH","DEL->PHX","DEL->MIA","DEL->LAS","DEL->MAD","DEL->KUL","DEL->CAN","DEL->JFK","DEL->AMS","DEL->IST","DEL->LAX","DEL->LHR","DEL->HND","DEL->PEK","MAD->IAH","MAD->PHX","MAD->CLT","MAD->BKK","MAD->SIN","MAD->AMS","MAD->DFW","MAD->ORD","MAD->DXB","MAD->PEK","KUL->IAH","KUL->CLT","KUL->MAD","KUL->DEN","KUL->LHR","ICN->IAH","ICN->MAD","ICN->BKK","ICN->CGK","ICN->DFW","ICN->LAX","ICN->LHR","SFO->IAH","SFO->CLT","SFO->MAD","SFO->KUL","SFO->CGK","SFO->SIN","SFO->AMS","SFO->PVG","SFO->FRA","SFO->IST","SFO->CDG","SFO->HKG","SFO->LHR","SFO->ATL","SFO->PEK","BKK->CLT","BKK->LAX","BKK->LHR","BKK->ORD","BKK->DXB","DEN->IAH","DEN->CLT","DEN->DEL","DEN->MAD","DEN->KUL","DEN->SFO","DEN->BKK","DEN->CGK","DEN->CAN","DEN->JFK","DEN->AMS","DEN->FRA","DEN->HKG","DEN->LHR","DEN->HND","DEN->ORD","DEN->DXB","DEN->ATL","DEN->PEK","CGK->IAH","CGK->MIA","CGK->CLT","CGK->LAS","CGK->DEL","CGK->MAD","CGK->DFW","CAN->IAH","CAN->CLT","CAN->SFO","CAN->FRA","CAN->DFW","CAN->DXB","CAN->ATL","SIN->ICN","SIN->AMS","SIN->PVG","SIN->FRA","SIN->PEK","JFK->IAH","JFK->ICN","JFK->SIN","JFK->DFW","JFK->ORD","JFK->DXB","JFK->PEK","AMS->IAH","AMS->MIA","AMS->CLT","AMS->DEL","AMS->KUL","AMS->SFO","AMS->BKK","AMS->DEN","AMS->CGK","AMS->CAN","AMS->SIN","AMS->JFK","AMS->PVG","AMS->FRA","AMS->IST","AMS->DFW","AMS->CDG","AMS->HKG","AMS->LAX","AMS->LHR","AMS->ORD","AMS->DXB","PVG->IAH","PVG->PHX","PVG->LAS","PVG->MAD","PVG->KUL","PVG->SFO","PVG->BKK","PVG->DEN","PVG->CGK","PVG->SIN","PVG->FRA","PVG->IST","PVG->LAX","PVG->LHR","PVG->HND","FRA->IAH","FRA->MIA","FRA->CLT","FRA->LAS","FRA->DEL","FRA->MAD","FRA->KUL","FRA->ICN","FRA->SFO","FRA->BKK","FRA->DEN","FRA->CGK","FRA->SIN","FRA->PVG","FRA->IST","FRA->DFW","FRA->LAX","FRA->HND","FRA->ORD","FRA->DXB","FRA->ATL","FRA->PEK","IST->PHX","IST->MIA","IST->CLT","IST->DEL","IST->MAD","IST->ICN","IST->SFO","IST->DEN","IST->CAN","IST->AMS","IST->PVG","IST->FRA","IST->HKG","IST->LAX","IST->HND","IST->PEK","DFW->IAH","DFW->DEL","DFW->MAD","DFW->CGK","DFW->CAN","DFW->SIN","DFW->JFK","DFW->AMS","DFW->PVG","DFW->FRA","DFW->IST","DFW->CDG","DFW->HKG","DFW->LHR","DFW->HND","DFW->ORD","DFW->DXB","DFW->ATL","CDG->PHX","CDG->MIA","CDG->CLT","CDG->LAS","CDG->DEL","CDG->KUL","CDG->ICN","CDG->SFO","CDG->BKK","CDG->DEN","CDG->SIN","CDG->JFK","CDG->AMS","CDG->PVG","CDG->FRA","CDG->IST","CDG->DFW","CDG->HKG","CDG->LAX","CDG->LHR","CDG->ORD","CDG->DXB","CDG->ATL","HKG->IAH","HKG->PHX","HKG->MIA","HKG->CLT","HKG->DEL","HKG->MAD","HKG->KUL","HKG->DEN","HKG->AMS","HKG->FRA","HKG->IST","HKG->CDG","HKG->LAX","HKG->LHR","HKG->HND","HKG->ORD","HKG->DXB","HKG->ATL","LAX->IAH","LAX->LAS","LAX->DEL","LAX->KUL","LAX->ICN","LAX->BKK","LAX->CGK","LAX->CAN","LAX->SIN","LAX->AMS","LAX->PVG","LAX->FRA","LAX->IST","LAX->DFW","LAX->CDG","LAX->HKG","LAX->HND","LAX->ORD","LAX->DXB","LAX->PEK","LHR->IAH","LHR->PHX","LHR->MIA","LHR->CLT","LHR->DEL","LHR->MAD","LHR->SFO","LHR->BKK","LHR->DEN","LHR->SIN","LHR->AMS","LHR->PVG","LHR->FRA","LHR->IST","LHR->DFW","LHR->CDG","LHR->HND","LHR->ATL","LHR->PEK","HND->PHX","HND->MIA","HND->CLT","HND->DEL","HND->MAD","HND->SFO","HND->BKK","HND->DEN","HND->DFW","HND->CDG","HND->LHR","HND->ORD","HND->DXB","HND->ATL","ORD->MIA","ORD->CLT","ORD->DEL","ORD->MAD","ORD->KUL","ORD->ICN","ORD->SFO","ORD->CGK","ORD->CAN","ORD->SIN","ORD->AMS","ORD->PVG","ORD->FRA","ORD->DFW","ORD->CDG","ORD->ATL","ORD->PEK","DXB->CLT","DXB->LAS","DXB->DEL","DXB->KUL","DXB->BKK","DXB->DEN","DXB->CGK","DXB->CAN","DXB->AMS","DXB->FRA","DXB->IST","DXB->CDG","DXB->HKG","DXB->LAX","DXB->LHR","ATL->IAH","ATL->CLT","ATL->DEL","ATL->KUL","ATL->ICN","ATL->CAN","ATL->JFK","ATL->PVG","ATL->FRA","ATL->IST","ATL->HKG","ATL->LHR","ATL->HND","ATL->DXB","ATL->PEK","PEK->IAH","PEK->PHX","PEK->CLT","PEK->LAS","PEK->DEL","PEK->MAD","PEK->SFO","PEK->CGK","PEK->CAN","PEK->JFK","PEK->AMS","PEK->PVG","PEK->FRA","PEK->IST","PEK->DFW","PEK->CDG","PEK->LHR","PEK->HND","PEK->ORD","PEK->DXB"],"globe":[{"latitude":40.0798614,"longtitude":116.6009234,"magnitude":0.6867469879518072},{"latitude":33.6433884,"longtitude":-84.4288247,"magnitude":0.07630522088353414},{"latitude":25.2531793,"longtitude":55.3634841,"magnitude":0.3333333333333333},{"latitude":41.9741665,"longtitude":-87.9095101,"magnitude":0.2289156626506024},{"latitude":35.5493975,"longtitude":139.7776499,"magnitude":0.24899598393574296},{"latitude":51.4700256,"longtitude":-0.4564842,"magnitude":0.8032128514056225},{"latitude":33.9415933,"longtitude":-118.4107187,"magnitude":0.6506024096385542},{"latitude":22.3080519,"longtitude":113.9162921,"magnitude":1},{"latitude":49.0096941,"longtitude":2.5457358,"magnitude":0.4538152610441767},{"latitude":32.8998136,"longtitude":-97.0425239,"magnitude":0.11646586345381527},{"latitude":40.9829928,"longtitude":28.8082538,"magnitude":0.12048192771084337},{"latitude":50.037936,"longtitude":8.5599631,"magnitude":0.15261044176706828},{"latitude":31.1443485,"longtitude":121.8060843,"magnitude":0.5903614457831325},{"latitude":52.3105419,"longtitude":4.7660857,"magnitude":0.321285140562249},{"latitude":40.6413151,"longtitude":-73.7803278,"magnitude":0.27309236947791166},{"latitude":1.3644256,"longtitude":103.9893421,"magnitude":0.7550200803212851},{"latitude":1.3644256,"longtitude":103.9893421,"magnitude":0.3413654618473896},{"latitude":-6.1275065,"longtitude":106.6514972,"magnitude":0.37349397590361444},{"latitude":39.8561004,"longtitude":-104.6759263,"magnitude":0.30120481927710846},{"latitude":13.6900043,"longtitude":100.7479237,"magnitude":0.570281124497992},{"latitude":37.6213171,"longtitude":-122.3811441,"magnitude":0.4939759036144578},{"latitude":37.460195,"longtitude":126.438507,"magnitude":0.4779116465863454},{"latitude":2.7545304,"longtitude":101.7021233,"magnitude":0.5301204819277109},{"latitude":40.4839402,"longtitude":-3.5701402,"magnitude":0.14859437751004015},{"latitude":28.5561671,"longtitude":77.0977691,"magnitude":0.12449799196787148},{"latitude":36.0840041,"longtitude":-115.1559276,"magnitude":0.1927710843373494},{"latitude":35.214407,"longtitude":-80.9495033,"magnitude":0.05220883534136546},{"latitude":25.7958698,"longtitude":-80.2892344,"magnitude":0.10843373493975904},{"latitude":33.4372951,"longtitude":-112.0165429,"magnitude":0.12449799196787148},{"latitude":29.9902245,"longtitude":-95.3389714,"magnitude":0.20080321285140562}]};

var start_data4 =
{"stats":{"DFW":47,"PEK":17,"LAX":61,"HKG":16,"MAD":33,"ATL":7,"FRA":44,"DXB":44,"ORD":45,"HND":5,"IST":11,"PVG":123,"AMS":36,"JFK":59,"SIN":34,"CAN":3,"CGK":0,"DEN":6,"SFO":42,"ICN":13,"KUL":7,"DEL":22,"LAS":4,"CLT":21,"MIA":18,"IAH":51,"SVO":26,"YYZ":23,"GRU":4,"LHR":81,"PHX":14,"BKK":55,"SYD":15,"CDG":25},"done":["MAD->HKG","CAN->SVO","JFK->BKK","JFK->FRA","JFK->LHR","PVG->MAD","IST->JFK","IST->PEK","CDG->MIA","HKG->MIA","HKG->LAX","LAX->BKK","LAX->CDG","DXB->BKK","ATL->PHX","PEK->SVO","PEK->AMS","PEK->LHR","YYZ->JFK","YYZ->AMS","SVO->CLT","SVO->JFK","SVO->PVG","SVO->FRA","SVO->HKG","IAH->PHX","IAH->CLT","IAH->CDG","PHX->LAS","PHX->DFW","PHX->LAX","MIA->SFO","MIA->JFK","MIA->DFW","CLT->PHX","CLT->MIA","CLT->SFO","CLT->DEN","CLT->DFW","CLT->ORD","LAS->CLT","LAS->DFW","DEL->SYD","DEL->SIN","DEL->IST","DEL->LHR","MAD->BKK","MAD->PVG","MAD->PEK","SFO->DFW","CAN->BKK","JFK->PVG","AMS->PEK","PVG->JFK","FRA->DEL","FRA->CAN","FRA->JFK","IST->FRA","IST->CDG","IST->HKG","LAX->IAH","LAX->DEL","LHR->SYD","LHR->BKK","ORD->IAH","ORD->CLT","ORD->DFW","DXB->SYD","DXB->DEL","DXB->ICN","ATL->IAH","ATL->MIA","ATL->CLT","ATL->JFK","ATL->ORD","PEK->CLT","PEK->FRA","PEK->DXB","GRU->YYZ","GRU->PHX","GRU->MIA","GRU->CLT","GRU->LAS","GRU->MAD","GRU->SFO","GRU->CGK","GRU->CAN","GRU->SIN","GRU->JFK","GRU->AMS","GRU->PVG","GRU->FRA","GRU->DFW","GRU->CDG","GRU->LHR","GRU->ORD","GRU->DXB","GRU->ATL","GRU->PEK","SYD->GRU","SYD->YYZ","SYD->SVO","SYD->IAH","SYD->KUL","SYD->PVG","SYD->FRA","SYD->DFW","SYD->CDG","SYD->ORD","SYD->ATL","YYZ->GRU","YYZ->SYD","YYZ->IAH","YYZ->MIA","YYZ->LAS","YYZ->MAD","YYZ->BKK","YYZ->SIN","YYZ->FRA","YYZ->IST","YYZ->CDG","YYZ->HKG","YYZ->DXB","YYZ->ATL","YYZ->PEK","SVO->YYZ","SVO->IAH","SVO->LAS","SVO->MAD","SVO->SFO","SVO->CAN","SVO->DFW","SVO->CDG","SVO->ORD","IAH->GRU","IAH->SYD","IAH->SVO","IAH->DEL","IAH->BKK","IAH->DEN","IAH->CAN","IAH->SIN","IAH->AMS","IAH->FRA","IAH->DFW","IAH->HKG","IAH->LAX","IAH->LHR","IAH->HND","IAH->ORD","IAH->DXB","IAH->ATL","IAH->PEK","PHX->GRU","PHX->SYD","PHX->YYZ","PHX->SVO","PHX->IAH","PHX->CLT","PHX->DEL","PHX->MAD","PHX->KUL","PHX->ICN","PHX->SIN","PHX->AMS","PHX->PVG","PHX->FRA","PHX->IST","PHX->CDG","PHX->LHR","PHX->HND","PHX->ORD","PHX->DXB","PHX->ATL","PHX->PEK","MIA->GRU","MIA->SYD","MIA->YYZ","MIA->IAH","MIA->PHX","MIA->CLT","MIA->MAD","MIA->KUL","MIA->BKK","MIA->CAN","MIA->SIN","MIA->AMS","MIA->FRA","MIA->HKG","MIA->LAX","MIA->LHR","MIA->DXB","MIA->ATL","MIA->PEK","CLT->GRU","CLT->SYD","CLT->YYZ","CLT->SVO","CLT->IAH","CLT->LAS","CLT->MAD","CLT->KUL","CLT->ICN","CLT->CGK","CLT->CAN","CLT->SIN","CLT->JFK","CLT->AMS","CLT->PVG","CLT->FRA","CLT->CDG","CLT->HKG","CLT->LAX","CLT->LHR","CLT->HND","CLT->DXB","CLT->ATL","CLT->PEK","LAS->GRU","LAS->SYD","LAS->SVO","LAS->IAH","LAS->PHX","LAS->DEL","LAS->MAD","LAS->KUL","LAS->DEN","LAS->CGK","LAS->CAN","LAS->SIN","LAS->AMS","LAS->PVG","LAS->FRA","LAS->IST","LAS->CDG","LAS->HND","LAS->PEK","DEL->GRU","DEL->IAH","DEL->PHX","DEL->CLT","DEL->LAS","DEL->KUL","DEL->DEN","DEL->FRA","DEL->CDG","DEL->DXB","DEL->PEK","MAD->YYZ","MAD->SVO","MAD->PHX","MAD->CLT","MAD->LAS","MAD->DEN","MAD->JFK","MAD->FRA","MAD->IST","MAD->DFW","MAD->LAX","MAD->ATL","KUL->SVO","KUL->CLT","KUL->BKK","KUL->DEN","KUL->PVG","KUL->FRA","KUL->DFW","ICN->MIA","ICN->JFK","ICN->PVG","ICN->FRA","ICN->IST","ICN->DFW","ICN->LHR","SFO->GRU","SFO->SYD","SFO->SVO","SFO->CLT","SFO->MAD","SFO->ICN","SFO->CGK","SFO->JFK","SFO->AMS","SFO->PVG","SFO->FRA","SFO->IST","SFO->CDG","BKK->AMS","BKK->PVG","BKK->FRA","BKK->IST","BKK->LHR","DEN->CLT","CGK->GRU","SIN->PVG","JFK->SVO","JFK->DFW","JFK->ATL","JFK->PEK","AMS->PVG","AMS->DXB","PVG->MIA","PVG->AMS","PVG->CDG","FRA->DXB","IST->ICN","IST->PVG","DFW->IAH","DFW->MIA","DFW->CLT","DFW->LAS","DFW->SFO","DFW->JFK","DFW->LAX","DFW->ORD","DFW->ATL","CDG->SVO","CDG->KUL","CDG->BKK","CDG->DXB","CDG->PEK","HKG->SYD","HKG->BKK","HKG->SIN","HKG->AMS","HKG->PVG","HKG->LHR","LAX->PHX","LAX->CLT","LAX->DFW","LAX->LHR","LHR->GRU","LHR->YYZ","LHR->SVO","LHR->IAH","LHR->MIA","LHR->CLT","LHR->LAS","LHR->DEL","LHR->MAD","LHR->KUL","LHR->ICN","LHR->SFO","LHR->DEN","LHR->CGK","LHR->CAN","LHR->SIN","LHR->JFK","LHR->AMS","LHR->PVG","LHR->IST","LHR->DFW","LHR->HKG","LHR->LAX","LHR->HND","LHR->ORD","LHR->DXB","LHR->PEK","ORD->FRA","ORD->ATL","DXB->MAD","DXB->HKG","DXB->LAX","DXB->PEK","ATL->DFW"],"globe":[{"latitude":40.0798614,"longtitude":116.6009234,"magnitude":0.13821138211382114},{"latitude":33.6433884,"longtitude":-84.4288247,"magnitude":0.056910569105691054},{"latitude":25.2531793,"longtitude":55.3634841,"magnitude":0.35772357723577236},{"latitude":41.9741665,"longtitude":-87.9095101,"magnitude":0.36585365853658536},{"latitude":35.5493975,"longtitude":139.7776499,"magnitude":0.04065040650406504},{"latitude":51.4700256,"longtitude":-0.4564842,"magnitude":0.6585365853658537},{"latitude":33.9415933,"longtitude":-118.4107187,"magnitude":0.4959349593495935},{"latitude":22.3080519,"longtitude":113.9162921,"magnitude":0.13008130081300814},{"latitude":49.0096941,"longtitude":2.5457358,"magnitude":0.2032520325203252},{"latitude":32.8998136,"longtitude":-97.0425239,"magnitude":0.3821138211382114},{"latitude":40.9829928,"longtitude":28.8082538,"magnitude":0.08943089430894309},{"latitude":50.037936,"longtitude":8.5599631,"magnitude":0.35772357723577236},{"latitude":31.1443485,"longtitude":121.8060843,"magnitude":1},{"latitude":52.3105419,"longtitude":4.7660857,"magnitude":0.2926829268292683},{"latitude":40.6413151,"longtitude":-73.7803278,"magnitude":0.4796747967479675},{"latitude":1.3644256,"longtitude":103.9893421,"magnitude":0.2764227642276423},{"latitude":23.3959128,"longtitude":113.3057812,"magnitude":0.024390243902439025},{"latitude":-6.1275065,"longtitude":106.6514972,"magnitude":0},{"latitude":39.8561004,"longtitude":-104.6759263,"magnitude":0.04878048780487805},{"latitude":13.6900043,"longtitude":100.7479237,"magnitude":0.44715447154471544},{"latitude":37.6213171,"longtitude":-122.3811441,"magnitude":0.34146341463414637},{"latitude":37.460195,"longtitude":126.438507,"magnitude":0.10569105691056911},{"latitude":2.7545304,"longtitude":101.7021233,"magnitude":0.056910569105691054},{"latitude":40.4839402,"longtitude":-3.5701402,"magnitude":0.2682926829268293},{"latitude":28.5561671,"longtitude":77.0977691,"magnitude":0.17886178861788618},{"latitude":36.0840041,"longtitude":-115.1559276,"magnitude":0.032520325203252036},{"latitude":35.214407,"longtitude":-80.9495033,"magnitude":0.17073170731707318},{"latitude":25.7958698,"longtitude":-80.2892344,"magnitude":0.14634146341463414},{"latitude":33.4372951,"longtitude":-112.0165429,"magnitude":0.11382113821138211},{"latitude":29.9902245,"longtitude":-95.3389714,"magnitude":0.4146341463414634},{"latitude":55.9736482,"longtitude":37.4103142,"magnitude":0.21138211382113822},{"latitude":43.6777215,"longtitude":-79.6270084,"magnitude":0.18699186991869918},{"latitude":-33.9399183,"longtitude":151.1730877,"magnitude":0.12195121951219512},{"latitude":-23.434548,"longtitude":-46.4803147,"magnitude":0.032520325203252036}]};

var mydata = getBlurredData(start_data4.globe);
//console.log(mydata);
//var file = new File('temp.json', 'write');
var data_str = JSON.stringify(mydata);
console.log(data_str);

//file.open();
//file.writeline(data_str);
//file.close();
